import { Meta, Props, Story, Preview } from '@web/storybook-prebuilt/addon-docs/blocks.js';

<Meta title="Forms/File" />

# File

The file input uses the native <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file">HTML File Input</a>.

## Installation

To use the file component import the component in your JavaScript.

```typescript
import '@cds/core/file/register.js';
```

```html
<cds-file>
  <label>file</label>
  <input type="file" multiple />
  <cds-control-message>message text</cds-control-message>
</cds-file>
```

<Preview>
  <Story id="stories-file--file" />
</Preview>

## Vertical

<Preview>
  <Story id="stories-file--vertical" />
</Preview>

## Horizontal

<Preview>
  <Story id="stories-file--horizontal" />
</Preview>

## Compact

<Preview>
  <Story id="stories-file--compact" />
</Preview>

## Dark Theme

<Preview>
  <Story id="stories-file--dark-theme" />
</Preview>

## React Usage

Due to React's synthetic event system, the `onChange` prop is not called when the file input is cleared using the X button.
Use a ref to access the native event instead.

```typescript
const Component = () => {
  const inputRef = useRef<HTMLInputElement>();

  const onNativeChange = useCallback(e => {
    // e.target.files
  }, []);

  useEffect(() => {
    inputRef.current?.addEventListener('change', onNativeChange);

    return () => {
      // remove the listener when the component unmounts
      inputRef.current?.removeEventListener('change', onNativeChange);
    };
  }, []);

  return (
    <CdsFile>
      <label>My File Input</label>
      <input type="file" ref={inputRef}></input>
    </CdsFile>
  );
};
```

## File API

<Props of={'cds-file'} />
